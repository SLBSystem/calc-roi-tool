<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Le Juge de Rentabilité</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen w-full bg-gradient-to-b from-white to-zinc-100 flex flex-col items-center justify-center p-4 space-y-3">

  <div class="mx-auto w-full max-w-sm rounded-2xl bg-white/70 backdrop-blur shadow-lg ring-1 ring-zinc-200 overflow-hidden">
    <div class="h-1 w-full bg-gradient-to-r from-[#9600ff] to-[#ed0ecf] opacity-60"></div>
    <div class="p-5 space-y-4">

      <!-- Résultat -->
      <div id="resultBox" class="rounded-xl border border-zinc-200 bg-white p-3 shadow-sm text-center space-y-2">
        <div class="text-sm font-semibold text-zinc-700">
          Ton temps & ton cash récupérés s’afficheront juste ici 👇
        </div>
        <div class="text-xs text-zinc-500 mt-1">
          🚀 Tape tes chiffres et regarde la magie opérer !
        </div>
      </div>

      <!-- Formulaire -->
      <div class="space-y-3 text-sm">
        <div class="grid grid-cols-2 gap-2">
          <label class="flex flex-col">
            <span class="text-zinc-600 text-xs">⏱️ Temps perdu par action</span>
            <input id="minutes" type="number" placeholder="ex: 10 min"
              class="rounded-lg border border-zinc-200 p-2 text-sm bg-white shadow-sm outline-none" />
          </label>
          <label class="flex flex-col">
            <span class="text-zinc-600 text-xs">🔄 Fréquence</span>
            <input id="freq" type="number" placeholder="ex: 5 fois"
              class="rounded-lg border border-zinc-200 p-2 text-sm bg-white shadow-sm outline-none" />
          </label>
        </div>

        <label class="flex flex-col">
          <span class="text-zinc-600 text-xs">Unité de fréquence</span>
          <select id="freqUnit"
            class="rounded-lg border border-zinc-200 p-2 text-sm bg-white shadow-sm outline-none">
            <option>/jour</option>
            <option>/semaine</option>
            <option>/mois</option>
            <option>/an</option>
          </select>
        </label>

        <div class="grid grid-cols-2 gap-2">
          <label class="flex flex-col">
            <span class="text-zinc-600 text-xs">💶 Taux horaire</span>
            <input id="rate" type="number" placeholder="ex: 20 €/h"
              class="rounded-lg border border-zinc-200 p-2 text-sm bg-white shadow-sm outline-none" />
          </label>
          <label class="flex flex-col">
            <span class="text-zinc-600 text-xs">📦 Prix/an (outil)</span>
            <input id="toolPrice" type="number" placeholder="ex: 200 €/an"
              class="rounded-lg border border-zinc-200 p-2 text-sm bg-white shadow-sm outline-none" />
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Phrase explicative -->
  <div class="max-w-sm text-center text-xs text-zinc-500 italic mt-1">
    Temps perdu par action × Fréquence annuelle → converti en heures → × ton taux horaire → comparé au prix de l’outil.<br />
    Bref : tu vois en 2s si ça te fait gagner ou cramer du cash.
  </div>

  <script>
    const minutesEl = document.getElementById('minutes');
    const freqEl = document.getElementById('freq');
    const freqUnitEl = document.getElementById('freqUnit');
    const rateEl = document.getElementById('rate');
    const toolPriceEl = document.getElementById('toolPrice');
    const resultBox = document.getElementById('resultBox');

    function calcAnnualFreq(f, unit) {
      switch (unit) {
        case '/jour': return f * 365;
        case '/semaine': return f * 52;
        case '/mois': return f * 12;
        case '/an': return f;
        default: return f;
      }
    }

    function formatTime(mins) {
      if (!mins) return "0min";
      const h = Math.floor(mins / 60);
      const m = Math.round(mins % 60);
      if (h > 0 && m > 0) return `${h}h ${m}min`;
      if (h > 0 && m === 0) return `${h}h`;
      return `${m}min`;
    }

    function formatNumber(num) {
      return new Intl.NumberFormat('fr-FR').format(num);
    }

    function update() {
      const minutes = Number(minutesEl.value);
      const freq = Number(freqEl.value);
      const rate = Number(rateEl.value);
      const toolPrice = Number(toolPriceEl.value);
      const freqUnit = freqUnitEl.value;

      const annualMinutes = (minutes && freq) ? minutes * calcAnnualFreq(freq, freqUnit) : 0;
      const moneyLost = rate ? (annualMinutes / 60) * rate : 0;
      const balance = toolPrice ? moneyLost - toolPrice : 0;

      if (!annualMinutes) {
        resultBox.innerHTML = `
          <div class="text-sm font-semibold text-zinc-700">Ton temps & ton cash récupérés s’afficheront juste ici 👇</div>
          <div class="text-xs text-zinc-500 mt-1">🚀 Tape tes chiffres et regarde la magie opérer !</div>
        `;
        return;
      }

      let html = `<div class="text-xs uppercase tracking-wide text-zinc-500">Résultat</div>`;
      html += `<div class="text-sm font-medium text-zinc-900">⏳ Temps perdu : ${formatTime(annualMinutes)}/an</div>`;
      if (rate) {
        html += `<div class="text-sm font-medium text-red-600">💸 Argent perdu : ${formatNumber(Math.round(moneyLost))}€/an</div>`;
      }
      if (rate && toolPrice) {
        if (balance > 0) {
          html += `<div class="mt-2 text-sm font-medium text-green-600">🎉 ${formatNumber(Math.round(balance))}€ et ${formatTime(annualMinutes)} sauvés</div>`;
        } else {
          html += `<div class="mt-2 text-sm font-medium text-red-600">😬 Pas rentable…</div>`;
        }
      }
      resultBox.innerHTML = html;
    }

    [minutesEl, freqEl, freqUnitEl, rateEl, toolPriceEl].forEach(el => el.addEventListener('input', update));
  </script>
</body>
</html>
